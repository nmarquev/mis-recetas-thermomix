# üó∫Ô∏è TasteBox - Roadmap de Desarrollo

**√öltima actualizaci√≥n**: Octubre 2025
**URL Producci√≥n**: https://tastebox.beweb.com.ar (Backend: puerto 5000)

---

## üìä Estado Actual del Proyecto

### ‚úÖ Completado (v1.0)
- Sistema base de recetas CRUD
- Autenticaci√≥n y gesti√≥n de usuarios
- Chrome Extension para importaci√≥n directa
- Importaci√≥n desde URLs (HTML/Instagram/Cookidoo)
- Importaci√≥n de archivos DOCX
- Importaci√≥n de archivos PDF con an√°lisis visual
- Detecci√≥n optimizada de recetas Thermomix/Cookidoo
- Soporte para recetas multiparte (secciones)
- Sistema TTS (Text-to-Speech)
- C√°lculo nutricional autom√°tico
- Edici√≥n de perfiles con foto
- UI/UX con tema claro/oscuro
- Modal de edici√≥n con tabs organizados
- Sistema de empaquetado de extensi√≥n

---

## üéØ Roadmap por Prioridad

---

## üî¥ **PRIORIDAD ALTA** - Funcionalidades Core Faltantes

### 1. **Sistema de Planificaci√≥n de Men√∫s** üçΩÔ∏è
**Descripci√≥n**: Planificador semanal de comidas con generaci√≥n de lista de compras.

**Funcionalidades**:
- Calendario semanal drag-and-drop para asignar recetas
- Vista diaria/semanal/mensual
- Generaci√≥n autom√°tica de lista de compras consolidada
- Ajuste de porciones por comida
- Filtros: tipo de comida (desayuno, almuerzo, cena, snack)
- Notificaciones/recordatorios de comidas planificadas

**Componentes a crear**:
- `src/pages/MealPlanner.tsx` - P√°gina principal
- `src/components/planner/WeekCalendar.tsx` - Calendario semanal
- `src/components/planner/DayView.tsx` - Vista de d√≠a
- `src/components/planner/ShoppingList.tsx` - Lista de compras
- `backend/src/routes/mealPlanner.ts` - API de planificaci√≥n

**Database**:
```prisma
model MealPlan {
  id          String   @id @default(cuid())
  userId      String
  date        DateTime
  mealType    String   // breakfast, lunch, dinner, snack
  recipeId    String
  servings    Int      @default(1)
  notes       String?
  completed   Boolean  @default(false)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  user   User   @relation(fields: [userId], references: [id])
  recipe Recipe @relation(fields: [recipeId], references: [id])

  @@map("meal_plans")
}

model ShoppingList {
  id         String   @id @default(cuid())
  userId     String
  weekStart  DateTime
  items      Json     // Array of { ingredient, amount, unit, checked, recipeIds[] }
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt

  user User @relation(fields: [userId], references: [id])

  @@map("shopping_lists")
}
```

**Estimaci√≥n**: 5-7 d√≠as
**Dependencias**: Ninguna

---

### 2. **Sistema de Favoritos y Colecciones** ‚≠ê
**Descripci√≥n**: Organizaci√≥n de recetas en colecciones personalizadas.

**Funcionalidades**:
- Marcar recetas como favoritas (coraz√≥n)
- Crear colecciones personalizadas ("Mis postres", "Comidas r√°pidas", etc.)
- Drag-and-drop de recetas entre colecciones
- Compartir colecciones p√∫blicas (opcional)
- P√°gina de favoritos con grid de recetas
- Filtro por colecci√≥n en p√°gina principal

**Componentes a crear**:
- `src/pages/Favorites.tsx` - P√°gina de favoritos
- `src/components/collections/CollectionModal.tsx` - Crear/editar colecci√≥n
- `src/components/collections/CollectionList.tsx` - Lista de colecciones
- `backend/src/routes/collections.ts` - API de colecciones

**Database**:
```prisma
model Collection {
  id          String   @id @default(cuid())
  userId      String
  name        String
  description String?
  isPublic    Boolean  @default(false)
  coverImage  String?
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  user    User              @relation(fields: [userId], references: [id])
  recipes CollectionRecipe[]

  @@map("collections")
}

model CollectionRecipe {
  id           String   @id @default(cuid())
  collectionId String
  recipeId     String
  order        Int      @default(0)
  createdAt    DateTime @default(now())

  collection Collection @relation(fields: [collectionId], references: [id], onDelete: Cascade)
  recipe     Recipe     @relation(fields: [recipeId], references: [id], onDelete: Cascade)

  @@unique([collectionId, recipeId])
  @@map("collection_recipes")
}

model Favorite {
  id        String   @id @default(cuid())
  userId    String
  recipeId  String
  createdAt DateTime @default(now())

  user   User   @relation(fields: [userId], references: [id])
  recipe Recipe @relation(fields: [recipeId], references: [id], onDelete: Cascade)

  @@unique([userId, recipeId])
  @@map("favorites")
}
```

**Estimaci√≥n**: 3-4 d√≠as
**Dependencias**: Ninguna

---

### 3. **Sistema de Comentarios y Ratings** üí¨‚≠ê
**Descripci√≥n**: Permitir a usuarios valorar y comentar recetas.

**Funcionalidades**:
- Rating de 1-5 estrellas por receta
- Comentarios con texto y opcional foto del resultado
- Ordenar recetas por mejor rating
- Mostrar promedio de rating en cards
- Responder comentarios (threading b√°sico)
- Marcar comentarios como √∫tiles

**Componentes a crear**:
- `src/components/ratings/RatingStars.tsx` - Estrellas de rating
- `src/components/comments/CommentSection.tsx` - Secci√≥n de comentarios
- `src/components/comments/CommentForm.tsx` - Form para comentar
- `backend/src/routes/ratings.ts` - API de ratings
- `backend/src/routes/comments.ts` - API de comentarios

**Database**:
```prisma
model Rating {
  id        String   @id @default(cuid())
  userId    String
  recipeId  String
  rating    Int      // 1-5 stars
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  user   User   @relation(fields: [userId], references: [id])
  recipe Recipe @relation(fields: [recipeId], references: [id], onDelete: Cascade)

  @@unique([userId, recipeId])
  @@map("ratings")
}

model Comment {
  id           String   @id @default(cuid())
  userId       String
  recipeId     String
  parentId     String?  // For threading
  content      String
  imageUrl     String?  // Optional photo of user's result
  helpfulCount Int      @default(0)
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt

  user     User      @relation(fields: [userId], references: [id])
  recipe   Recipe    @relation(fields: [recipeId], references: [id], onDelete: Cascade)
  parent   Comment?  @relation("CommentThread", fields: [parentId], references: [id], onDelete: Cascade)
  replies  Comment[] @relation("CommentThread")

  @@map("comments")
}
```

**Estimaci√≥n**: 3-4 d√≠as
**Dependencias**: Ninguna

---

## üü° **PRIORIDAD MEDIA** - Mejoras de UX/Performance

### 4. **Sistema de B√∫squeda Avanzada** üîç
**Descripci√≥n**: B√∫squeda con filtros m√∫ltiples y autocompletado.

**Funcionalidades**:
- B√∫squeda por ingredientes ("tengo pollo, cebolla, tomate")
- Filtros combinados: dificultad, tiempo, tipo, tags
- Autocompletado con sugerencias
- B√∫squeda por rangos (tiempo: 10-30 min)
- Historial de b√∫squedas
- Resultados con highlighting de matches

**Componentes a crear**:
- `src/components/search/AdvancedSearchBar.tsx` - Barra de b√∫squeda avanzada
- `src/components/search/FilterPanel.tsx` - Panel de filtros
- `src/components/search/SearchResults.tsx` - Resultados de b√∫squeda
- `backend/src/routes/search.ts` - API de b√∫squeda optimizada

**Backend**:
- Implementar full-text search (PostgreSQL FTS o Elasticsearch)
- √çndices optimizados para b√∫squeda
- Paginaci√≥n de resultados

**Estimaci√≥n**: 4-5 d√≠as
**Dependencias**: Ninguna

---

### 5. **Sistema de Sustituciones de Ingredientes** üîÑ
**Descripci√≥n**: Sugerir sustitutos para ingredientes basados en alergias/disponibilidad.

**Funcionalidades**:
- Base de datos de sustituciones comunes
- Configurar alergias/intolerancias en perfil
- Sugerir autom√°ticamente sustitutos al ver receta
- Ajustar cantidades seg√∫n sustituto
- Marcar ingredientes como "no tengo"
- LLM sugiere alternativas creativas

**Componentes a crear**:
- `src/components/substitutions/SubstitutionBadge.tsx` - Badge de sustituci√≥n
- `src/components/substitutions/SubstitutionModal.tsx` - Modal de sustituciones
- `src/components/profile/AllergySettings.tsx` - Config de alergias
- `backend/src/services/substitutionService.ts` - Servicio de sustituciones

**Database**:
```prisma
model Substitution {
  id          String @id @default(cuid())
  ingredient  String
  substitute  String
  ratio       Float  @default(1.0) // Conversion ratio
  category    String // dairy, gluten, meat, etc.
  notes       String?

  @@map("substitutions")
}

model UserAllergy {
  id         String   @id @default(cuid())
  userId     String
  allergen   String
  severity   String   // mild, moderate, severe
  createdAt  DateTime @default(now())

  user User @relation(fields: [userId], references: [id])

  @@map("user_allergies")
}
```

**Estimaci√≥n**: 4-5 d√≠as
**Dependencias**: Ninguna

---

### 6. **Modo Cocina (Cooking Mode)** üë®‚Äçüç≥
**Descripci√≥n**: Interfaz hands-free para seguir recetas mientras cocinas.

**Funcionalidades**:
- Pantalla completa con pasos grandes
- Avance con gestos o comandos de voz
- Timer integrado por paso
- Modo nocturno/alto contraste
- Opci√≥n de TTS autom√°tico paso a paso
- Keep screen on
- Notas r√°pidas por paso (voz a texto)

**Componentes a crear**:
- `src/pages/CookingMode.tsx` - P√°gina de modo cocina
- `src/components/cooking/StepDisplay.tsx` - Display de paso actual
- `src/components/cooking/CookingTimer.tsx` - Timer integrado
- `src/hooks/useVoiceCommands.ts` - Hook para comandos de voz
- `src/hooks/useScreenWakeLock.ts` - Hook para mantener pantalla activa

**Tecnolog√≠as**:
- Web Speech API para comandos de voz
- Screen Wake Lock API
- Gestures con touch events

**Estimaci√≥n**: 5-6 d√≠as
**Dependencias**: Sistema TTS ya implementado

---

### 7. **Optimizaci√≥n de Im√°genes y CDN** üì∏
**Descripci√≥n**: Mejorar carga de im√°genes con optimizaci√≥n y CDN.

**Funcionalidades**:
- Compresi√≥n autom√°tica de im√°genes al subir
- Generaci√≥n de thumbnails (small, medium, large)
- Lazy loading de im√°genes
- Placeholder blur mientras carga
- WebP/AVIF con fallback a JPG
- CDN para servir im√°genes (Cloudflare/Cloudinary)

**Componentes a actualizar**:
- `backend/src/services/imageProcessor.ts` - Procesamiento de im√°genes
- `src/components/ui/OptimizedImage.tsx` - Componente de imagen optimizada
- `backend/src/routes/upload.ts` - Upload con procesamiento

**Librer√≠as**:
- `sharp` para procesamiento de im√°genes
- Cloudinary SDK (opcional)

**Estimaci√≥n**: 3-4 d√≠as
**Dependencias**: Ninguna

---

## üü¢ **PRIORIDAD BAJA** - Features Nice-to-Have

### 8. **Importaci√≥n desde Video** üé•
**Descripci√≥n**: Extraer recetas de videos de cocina (YouTube, TikTok).

**Funcionalidades**:
- Pegar URL de video
- Transcripci√≥n autom√°tica de audio (Whisper API)
- Detecci√≥n de ingredientes y pasos con LLM
- Captura de frames para im√°genes
- Timestamps de pasos importantes

**Componentes a crear**:
- `src/components/import/VideoImportModal.tsx`
- `backend/src/services/videoProcessor.ts`
- `backend/src/services/transcriptionService.ts`

**APIs**:
- YouTube Data API
- OpenAI Whisper API
- FFmpeg para procesamiento de video

**Estimaci√≥n**: 6-8 d√≠as
**Dependencias**: Budget para APIs de transcripci√≥n

---

### 9. **Modo Multijugador/Colaborativo** üë•
**Descripci√≥n**: Cocinar recetas en grupo con sincronizaci√≥n en tiempo real.

**Funcionalidades**:
- Crear "sesi√≥n de cocina" compartida
- M√∫ltiples usuarios siguiendo misma receta
- Ver progreso de otros en tiempo real
- Chat en vivo durante cocina
- Dividir tareas entre participantes
- Votaci√≥n de resultados finales

**Componentes a crear**:
- `src/components/multiplayer/CookingSession.tsx`
- `src/components/multiplayer/ParticipantsList.tsx`
- `src/components/multiplayer/LiveChat.tsx`
- `backend/src/services/websocket.ts` - WebSocket server

**Tecnolog√≠as**:
- WebSockets (Socket.io)
- Redis para state compartido

**Estimaci√≥n**: 8-10 d√≠as
**Dependencias**: Infraestructura de WebSockets

---

### 10. **Integraci√≥n con Asistentes de Voz** üó£Ô∏è
**Descripci√≥n**: Control por voz con Alexa, Google Assistant.

**Funcionalidades**:
- "Alexa, dame una receta de pollo"
- "Google, siguiente paso"
- "Siri, pon un timer de 10 minutos"
- Lectura de recetas completas
- A√±adir ingredientes a lista de compras por voz

**Skills/Actions**:
- Alexa Skill
- Google Action
- Siri Shortcuts

**Estimaci√≥n**: 10-12 d√≠as
**Dependencias**: Aprobaci√≥n de Amazon/Google, cuentas de desarrollador

---

## üîß **MEJORAS T√âCNICAS** - Deuda T√©cnica

### 11. **Testing E2E y Unitarios** ‚úÖ
**Tareas**:
- Tests unitarios para servicios cr√≠ticos (LLM, PDF processor)
- Tests E2E para flujos principales (Playwright)
- Coverage m√≠nimo 70%
- CI/CD con tests autom√°ticos

**Estimaci√≥n**: 5-7 d√≠as

---

### 12. **Migraci√≥n a React Query v5** üîÑ
**Tareas**:
- Actualizar @tanstack/react-query a v5
- Implementar caching agresivo
- Optimistic updates en edici√≥n de recetas
- Prefetching de recetas relacionadas

**Estimaci√≥n**: 2-3 d√≠as

---

### 13. **Internacionalizaci√≥n (i18n)** üåç
**Tareas**:
- Setup de i18next
- Traducciones ES, EN, PT
- Detecci√≥n autom√°tica de idioma
- Selector de idioma en UI

**Estimaci√≥n**: 4-5 d√≠as

---

### 14. **Analytics y M√©tricas** üìä
**Tareas**:
- Google Analytics 4 setup
- Event tracking (importaci√≥n, edici√≥n, TTS)
- Dashboard de m√©tricas en admin
- Heatmaps con Hotjar (opcional)

**Estimaci√≥n**: 2-3 d√≠as

---

## üìÖ Cronograma Sugerido (pr√≥ximos 3 meses)

### **Mes 1**: Funcionalidades Core
- ‚úÖ Semana 1-2: Sistema de Planificaci√≥n de Men√∫s
- ‚úÖ Semana 3: Sistema de Favoritos y Colecciones
- ‚úÖ Semana 4: Sistema de Comentarios y Ratings

### **Mes 2**: Mejoras de UX
- ‚úÖ Semana 1-2: Sistema de B√∫squeda Avanzada
- ‚úÖ Semana 2-3: Sistema de Sustituciones
- ‚úÖ Semana 3-4: Modo Cocina

### **Mes 3**: Optimizaci√≥n y Testing
- ‚úÖ Semana 1: Optimizaci√≥n de Im√°genes y CDN
- ‚úÖ Semana 2-3: Testing E2E y Unitarios
- ‚úÖ Semana 4: Analytics y Deploy final

---

## üéØ M√©tricas de √âxito

### KPIs a Trackear:
- **Recetas importadas por usuario**: >5/semana
- **Tasa de retenci√≥n 30 d√≠as**: >40%
- **Recetas cocinadas (modo cocina usado)**: >20%
- **Ratings promedio de recetas**: >4.0 estrellas
- **Tiempo promedio en app**: >15 min/sesi√≥n

---

## üí° Ideas Futuras (Backlog)

- **Marketplace de recetas**: Vender/comprar recetas premium
- **Nutricionista virtual**: Recomendaciones personalizadas basadas en objetivos
- **Modo offline**: PWA con recetas descargadas
- **Integraci√≥n con smartwatches**: Notificaciones de timers
- **AR Mode**: Ver receta en realidad aumentada sobre la mesa
- **AI Chef**: Generar recetas personalizadas con IA generativa
- **Social feed**: Feed de recetas de usuarios seguidos
- **Challenges semanales**: Retos de cocina con premios

---

## üìù Notas Finales

**Priorizaci√≥n basada en**:
1. Valor para usuario (funcionalidades m√°s demandadas)
2. Complejidad t√©cnica (quick wins primero)
3. Dependencias entre features
4. Recursos disponibles (tiempo, budget)

**Pr√≥ximos pasos inmediatos**:
1. ‚úÖ Commit y push de todos los cambios recientes
2. ‚úÖ Documentar configuraci√≥n de producci√≥n
3. ‚úÖ Setup de analytics b√°sico
4. ‚ñ∂Ô∏è Comenzar con Sistema de Favoritos (quick win)
